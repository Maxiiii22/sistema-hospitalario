{% extends 'layout/base-pacientes.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'estilos/styles_pacientes.css' %}">
{% endblock %}

{% block titulo %}
    <title>Mi cuenta</title>
{% endblock %}

{% block contenido %}
    <div class="main-form-paciente">
        <div class="container-form-paciente">    
            <h2 class="title-ficha">Mis Datos Personales</h2>

            <form action="" method="POST">
                {% csrf_token %}
                <input type="hidden" name="tipo_form" value="formMiCuenta">
                <div class="secciones">
                    <div class="datos-paciente">
                        <div class="campos">
                            <div class="campo-input">
                                <label for="id_login_id">Email:</label>
                                {{ form.login_id }}
                                {% if form.login_id.errors %}
                                    <div id="error_login_id" class="error-message">
                                        {% for error in form.login_id.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="campo-input">
                                <label for="id_password">Contraseña:</label>
                                <a href="{% url 'nuevaContraPaciente' %}">
                                    <input type="password" name="password" placeholder="Contraseña" maxlength="128" id="id_password" readonly style="cursor:pointer; width:100%">                                        
                                </a>
                            </div>
    
                            <div class="campo-input">
                                {{ form.dni.label_tag }}
                                {{ form.dni }}
                                {% if form.dni.errors %}
                                    <div id="error_dni" class="error-message">
                                        {% for error in form.dni.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="campo-input">
                                <label for="id_first_name">Nombre:</label>
                                {{ form.first_name }}
                                {% if form.first_name.errors %}
                                    <div id="error_first_name" class="error-message">
                                        {% for error in form.first_name.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="campo-input">
                                <label for="id_last_name">Apellido:</label>
                                {{ form.last_name }}
                                {% if form.last_name.errors %}
                                    <div id="error_last_name" class="error-message">
                                        {% for error in form.last_name.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="campo-input">
                                {{ form.direccion.label_tag }}
                                {{ form.direccion }}
                                {% if form.direccion.errors %}
                                    <div id="error_direccion" class="error-message">
                                        {% for error in form.direccion.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="campo-input">
                                {{ form.telefono.label_tag }}
                                {{ form.telefono }}
                                {% if form.telefono.errors %}
                                    <div id="error_telefono" class="error-message">
                                        {% for error in form.telefono.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                                
                            <div class="campo-input">
                                {{ form.sexo.label_tag }}
                                {{ form.sexo }}
                                {% if form.sexo.errors %}
                                    <div id="error_sexo" class="error-message">
                                        {% for error in form.sexo.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="campo-input">
                                {{ form.fecha_nacimiento.label_tag }}
                                {{ form.fecha_nacimiento }}
                                {% if form.fecha_nacimiento.errors %}
                                    <div id="error_fecha_nacimiento" class="error-message">
                                        {% for error in form.fecha_nacimiento.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="box-btn-mi-cuenta">
                    <button type="submit" class="btn-global">Guardar</button>
                    <button type="button" class="btn-global" onclick="cancelarPagoMiCuenta(this)">Cancelar servicios</button>
                </div>
            </form>
        </div>
    </div>

    <div id="editModal" class="modal {% if error %}show errorModal{% endif %}">
        <div class="modal-content">
            <span id="closeEditModal" class="close">&times;</span>
            <h2 id="modal-title">Cancelar Servicios</h2>
            <form method="POST" action="">
                {% csrf_token %}
                <input type="hidden" name="tipo_form" value="formCancelarPago">
                <input type="hidden" name="id_paciente_persona" value="{{request.user.id}}">
                <p class="p-cancelar-cita"><strong>¿Está seguro/a de que desea cancelar su cuota hospitalaria?</strong><br>
                    Esta acción también cancelará las cuotas de los menores a su cargo.<br>
                    Recuerde su número de paciente <strong>"{{form.instance.paciente.numero_paciente}}"</strong> para facilitar la reactivación futura de los servicios.
                </p>
                <button type="submit"  class="btn-global">Confirmar</button>
            </form>            
        </div>
    </div>


{% endblock %}

{% block scripts_js %}
    <script src="{% static 'js/pacientes.js' %}"></script>
{% endblock %}









